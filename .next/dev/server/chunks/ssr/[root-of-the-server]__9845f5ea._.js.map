{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/components/TanStackProvider/TanStackProvider.tsx"],"sourcesContent":["// components/TanStackProvider/TanStackProvider.tsx\n\n\"use client\";\n\nimport { useState } from \"react\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst TanStackProvider = ({ children }: Props) => {\n  const [queryClient] = useState(() => new QueryClient());\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {children}\n    </QueryClientProvider>\n  );\n};\n\nexport default TanStackProvider;"],"names":[],"mappings":"AAAA,mDAAmD;;;;;;AAInD;AACA;AAAA;AAHA;;;;AASA,MAAM,mBAAmB,CAAC,EAAE,QAAQ,EAAS;IAC3C,MAAM,CAAC,YAAY,GAAG,IAAA,iNAAQ,EAAC,IAAM,IAAI,4LAAW;IAEpD,qBACE,8OAAC,6MAAmB;QAAC,QAAQ;kBAC1B;;;;;;AAGP;uCAEe","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/Header/Header.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"header\": \"Header-module__arFiJq__header\",\n  \"navigation\": \"Header-module__arFiJq__navigation\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/AuthNavigation/AuthNavigation.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"logoutButton\": \"AuthNavigation-module__DN8toa__logoutButton\",\n  \"navigationItem\": \"AuthNavigation-module__DN8toa__navigationItem\",\n  \"navigationLink\": \"AuthNavigation-module__DN8toa__navigationLink\",\n  \"userEmail\": \"AuthNavigation-module__DN8toa__userEmail\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/lib/store/authStore.ts"],"sourcesContent":["import { User } from \"@/types/user\";\nimport { persist } from \"zustand/middleware\";\nimport { create } from \"zustand/react\";\n\nexport type AuthStore = {\n  user: User | null;\n  isAuthenticated: boolean;\n  setUser: (user: User) => void;\n  clearIsAuthenticated: () => void;\n};\n\nexport const useAuthStore = create<AuthStore>()(\n  persist(\n    (set) => ({\n      user: null,\n      isAuthenticated: false,\n      setUser: (user: User) => {\n        set({ user, isAuthenticated: true });\n      },\n      clearIsAuthenticated: () => {\n        set({ user: null, isAuthenticated: false });\n      },\n    }),\n    {\n      name: \"auth-storage\", \n    }\n  )\n);\n"],"names":[],"mappings":";;;;AACA;AACA;;;AASO,MAAM,eAAe,IAAA,kJAAM,IAChC,IAAA,wJAAO,EACL,CAAC,MAAQ,CAAC;QACR,MAAM;QACN,iBAAiB;QACjB,SAAS,CAAC;YACR,IAAI;gBAAE;gBAAM,iBAAiB;YAAK;QACpC;QACA,sBAAsB;YACpB,IAAI;gBAAE,MAAM;gBAAM,iBAAiB;YAAM;QAC3C;IACF,CAAC,GACD;IACE,MAAM;AACR","debugId":null}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/lib/api/api.ts"],"sourcesContent":["\nimport axios from 'axios';\n\nconst baseURL = `${process.env.NEXT_PUBLIC_API_URL}/api`;\n\nexport const api = axios.create({\n  baseURL: baseURL,\n  withCredentials: true, \n}); "],"names":[],"mappings":";;;;AACA;;AAEA,MAAM,UAAU,6DAAmC,IAAI,CAAC;AAEjD,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IAC9B,SAAS;IACT,iBAAiB;AACnB","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/lib/api/clientApi.ts"],"sourcesContent":["import { NewNote, Note } from \"@/types/note\";\nimport { api } from \"./api\";\nimport { User } from \"@/types/user\";\nimport { AxiosError } from \"axios\";\n\nconst myKey = process.env.NEXT_PUBLIC_NOTEHUB_TOKEN;\n\ninterface NoteListData {\n  notes: Note[];\n  totalPages: number;\n}\n\nexport type RegisterRequest = {\n  email: string;\n  password: string;\n  username?: string;\n};\n\nexport type LoginRequest = {\n  email: string;\n  password: string;\n};\n\ninterface UpdateUserRequest {\n  username?: string;\n  email?: string;\n  avatar?: string;\n}\n\n\nconst authHeaders = {\n  Authorization: `Bearer ${myKey}`,\n};\n\nexport const fetchNotes = async (\n  search: string,\n  page: number,\n  tag?: string\n): Promise<NoteListData> => {\n  const res = await api.get<NoteListData>(\"/notes\", {\n    params: { search, page, perPage: 12, sortBy: \"created\", tag },\n    headers: authHeaders,\n  });\n  return res.data;\n};\n\nexport const fetchNoteById = async (id: string): Promise<Note> => {\n  const res = await api.get<Note>(`/notes/${id}`, { headers: authHeaders });\n  return res.data;\n};\n\nexport const createNote = async (values: NewNote): Promise<Note> => {\n  const res = await api.post<Note>(\"/notes\", values, { headers: authHeaders });\n  return res.data;\n};\n\nexport const deleteNote = async (noteId: string): Promise<Note> => {\n  const res = await api.delete<Note>(`/notes/${noteId}`, { headers: authHeaders });\n  return res.data;\n};\n\n\nexport const register = async (data: RegisterRequest): Promise<User> => {\n  try {\n    const res = await api.post<User>(\"/auth/register\", data, { withCredentials: true });\n    return res.data;\n  } catch (error) {\n    const err = error as AxiosError<{ error: string }>;\n    throw new Error(err.response?.data?.error || \"Registration failed\");\n  }\n};\n\nexport const login = async (data: LoginRequest): Promise<User> => {\n  try {\n    const res = await api.post<User>(\"/auth/login\", data, { withCredentials: true });\n    return res.data;\n  } catch (error) {\n    const err = error as AxiosError<{ error: string }>;\n    throw new Error(err.response?.data?.error || \"Login failed\");\n  }\n};\n\n\nexport const checkClientSession = async (): Promise<boolean> => {\n  try {\n    const res = await api.get<{ valid: boolean }>(\"/auth/session\", { withCredentials: true });\n    return res.data.valid;\n  } catch {\n    return false;\n  }\n};\n\nexport const updateUser = async (data: UpdateUserRequest): Promise<User> => {\n  const res = await api.patch<User>(\"/users/me\", data, { withCredentials: true });\n  return res.data;\n};\n\nexport const logout = async (): Promise<void> => {\n  await api.post(\"/auth/logout\", {}, { withCredentials: true });\n};\n\nexport const getUser = async (): Promise<User> => {\n  const res = await api.get<User>(\"/users/me\", { withCredentials: true });\n  return res.data;\n};"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACA;;AAIA,MAAM;AAyBN,MAAM,cAAc;IAClB,eAAe,CAAC,OAAO,EAAE,OAAO;AAClC;AAEO,MAAM,aAAa,OACxB,QACA,MACA;IAEA,MAAM,MAAM,MAAM,wHAAG,CAAC,GAAG,CAAe,UAAU;QAChD,QAAQ;YAAE;YAAQ;YAAM,SAAS;YAAI,QAAQ;YAAW;QAAI;QAC5D,SAAS;IACX;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,gBAAgB,OAAO;IAClC,MAAM,MAAM,MAAM,wHAAG,CAAC,GAAG,CAAO,CAAC,OAAO,EAAE,IAAI,EAAE;QAAE,SAAS;IAAY;IACvE,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO;IAC/B,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAO,UAAU,QAAQ;QAAE,SAAS;IAAY;IAC1E,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO;IAC/B,MAAM,MAAM,MAAM,wHAAG,CAAC,MAAM,CAAO,CAAC,OAAO,EAAE,QAAQ,EAAE;QAAE,SAAS;IAAY;IAC9E,OAAO,IAAI,IAAI;AACjB;AAGO,MAAM,WAAW,OAAO;IAC7B,IAAI;QACF,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAO,kBAAkB,MAAM;YAAE,iBAAiB;QAAK;QACjF,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAO;QACd,MAAM,MAAM;QACZ,MAAM,IAAI,MAAM,IAAI,QAAQ,EAAE,MAAM,SAAS;IAC/C;AACF;AAEO,MAAM,QAAQ,OAAO;IAC1B,IAAI;QACF,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAO,eAAe,MAAM;YAAE,iBAAiB;QAAK;QAC9E,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAO;QACd,MAAM,MAAM;QACZ,MAAM,IAAI,MAAM,IAAI,QAAQ,EAAE,MAAM,SAAS;IAC/C;AACF;AAGO,MAAM,qBAAqB;IAChC,IAAI;QACF,MAAM,MAAM,MAAM,wHAAG,CAAC,GAAG,CAAqB,iBAAiB;YAAE,iBAAiB;QAAK;QACvF,OAAO,IAAI,IAAI,CAAC,KAAK;IACvB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,MAAM,MAAM,MAAM,wHAAG,CAAC,KAAK,CAAO,aAAa,MAAM;QAAE,iBAAiB;IAAK;IAC7E,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,SAAS;IACpB,MAAM,wHAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG;QAAE,iBAAiB;IAAK;AAC7D;AAEO,MAAM,UAAU;IACrB,MAAM,MAAM,MAAM,wHAAG,CAAC,GAAG,CAAO,aAAa;QAAE,iBAAiB;IAAK;IACrE,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/components/AuthNavigation/AuthNavigation.tsx"],"sourcesContent":["\"use client\";\nimport Link from \"next/link\";\nimport css from \"./AuthNavigation.module.css\";\nimport { useAuthStore } from \"@/lib/store/authStore\";\nimport { useRouter } from \"next/navigation\";\nimport { logout } from \"@/lib/api/clientApi\";\n\nexport const AuthNavigation = () => {\n  const router = useRouter();\n  const isAuthenticated = useAuthStore((state) => state.isAuthenticated);\n  const user = useAuthStore((state) => state.user);\n  const clearIsAuthenticated = useAuthStore(\n    (state) => state.clearIsAuthenticated\n  );\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      clearIsAuthenticated();\n      router.push(\"/sign-in\");\n    } catch (error) {\n      console.error(\"Logout failed:\", error);\n    }\n  };\n  return (\n    <>\n      {isAuthenticated ? (\n        <>\n          <li className={css.navigationItem}>\n            <Link\n              href=\"/profile\"\n              prefetch={false}\n              className={css.navigationLink}\n            >\n              Profile\n            </Link>\n          </li>\n\n          <li className={css.navigationItem}>\n            <p className={css.userEmail}>{user?.email}</p>\n            <button className={css.logoutButton} onClick={handleLogout}>\n              Logout\n            </button>\n          </li>\n        </>\n      ) : (\n        <>\n          <li className={css.navigationItem}>\n            <Link\n              href=\"/sign-in\"\n              prefetch={false}\n              className={css.navigationLink}\n            >\n              Login\n            </Link>\n          </li>\n\n          <li className={css.navigationItem}>\n            <Link\n              href=\"/sign-up\"\n              prefetch={false}\n              className={css.navigationLink}\n            >\n              Sign up\n            </Link>\n          </li>\n        </>\n      )}\n    </>\n  );\n};\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;AAOO,MAAM,iBAAiB;IAC5B,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,kBAAkB,IAAA,yIAAY,EAAC,CAAC,QAAU,MAAM,eAAe;IACrE,MAAM,OAAO,IAAA,yIAAY,EAAC,CAAC,QAAU,MAAM,IAAI;IAC/C,MAAM,uBAAuB,IAAA,yIAAY,EACvC,CAAC,QAAU,MAAM,oBAAoB;IAGvC,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,IAAA,iIAAM;YACZ;YACA,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kBAAkB;QAClC;IACF;IACA,qBACE;kBACG,gCACC;;8BACE,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;8BAC/B,cAAA,8OAAC,uKAAI;wBACH,MAAK;wBACL,UAAU;wBACV,WAAW,qKAAG,CAAC,cAAc;kCAC9B;;;;;;;;;;;8BAKH,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;;sCAC/B,8OAAC;4BAAE,WAAW,qKAAG,CAAC,SAAS;sCAAG,MAAM;;;;;;sCACpC,8OAAC;4BAAO,WAAW,qKAAG,CAAC,YAAY;4BAAE,SAAS;sCAAc;;;;;;;;;;;;;yCAMhE;;8BACE,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;8BAC/B,cAAA,8OAAC,uKAAI;wBACH,MAAK;wBACL,UAAU;wBACV,WAAW,qKAAG,CAAC,cAAc;kCAC9B;;;;;;;;;;;8BAKH,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;8BAC/B,cAAA,8OAAC,uKAAI;wBACH,MAAK;wBACL,UAAU;wBACV,WAAW,qKAAG,CAAC,cAAc;kCAC9B;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 436, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/components/Header/Header.tsx"],"sourcesContent":["\"use client\"\nimport Link from \"next/link\";\nimport css from \"./Header.module.css\";\nimport { AuthNavigation } from \"../AuthNavigation/AuthNavigation\";\n\nconst Header = () => {\n  return (\n    <header className={css.header}>\n      <Link href=\"/\" aria-label=\"Home\">\n        NoteHub\n      </Link>\n      <nav aria-label=\"Main Navigation\">\n        <ul className={css.navigation}>\n          <li>\n            <Link href=\"/\">Home</Link>\n          </li>\n          <li>\n            <Link href=\"/notes/filter/all\">Notes</Link>\n          </li>\n          <AuthNavigation/>\n        </ul>\n        \n      </nav>\n    </header>\n  );\n};\n\nexport default Header;"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKA,MAAM,SAAS;IACb,qBACE,8OAAC;QAAO,WAAW,qJAAG,CAAC,MAAM;;0BAC3B,8OAAC,uKAAI;gBAAC,MAAK;gBAAI,cAAW;0BAAO;;;;;;0BAGjC,8OAAC;gBAAI,cAAW;0BACd,cAAA,8OAAC;oBAAG,WAAW,qJAAG,CAAC,UAAU;;sCAC3B,8OAAC;sCACC,cAAA,8OAAC,uKAAI;gCAAC,MAAK;0CAAI;;;;;;;;;;;sCAEjB,8OAAC;sCACC,cAAA,8OAAC,uKAAI;gCAAC,MAAK;0CAAoB;;;;;;;;;;;sCAEjC,8OAAC,iKAAc;;;;;;;;;;;;;;;;;;;;;;AAMzB;uCAEe","debugId":null}},
    {"offset": {"line": 523, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/components/AuthProvider/AuthProvider.tsx"],"sourcesContent":["\"use client\";\nimport { checkClientSession, getUser } from \"@/lib/api/clientApi\";\nimport { useAuthStore } from \"@/lib/store/authStore\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { ReactNode, useEffect } from \"react\";\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nconst PRIVATE_ROUTES = [\"/profile\"];\n\nconst AuthProvider = ({ children }: AuthProviderProps) => {\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const setUser = useAuthStore((s) => s.setUser);\n  const clearIsAuthenticated = useAuthStore((s) => s.clearIsAuthenticated);\n\n  useEffect(() => {\n    const verifyAuth = async () => {\n      try {\n        const sessionValid = await checkClientSession();\n\n        if (sessionValid) {\n          const user = await getUser();\n          setUser(user);\n        } else {\n          clearIsAuthenticated();\n          // Редирект лише для приватних маршрутів\n          if (PRIVATE_ROUTES.some((r) => pathname.startsWith(r))) {\n            router.push(\"/sign-in\");\n          }\n        }\n      } catch (err) {\n        clearIsAuthenticated();\n        if (PRIVATE_ROUTES.some((r) => pathname.startsWith(r))) {\n          router.push(\"/sign-in\");\n        }\n      }\n    };\n\n    verifyAuth();\n  }, [pathname, router, setUser, clearIsAuthenticated]);\n\n  return children;\n};\n\nexport default AuthProvider;"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAJA;;;;;AAUA,MAAM,iBAAiB;IAAC;CAAW;AAEnC,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAqB;IACnD,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,UAAU,IAAA,yIAAY,EAAC,CAAC,IAAM,EAAE,OAAO;IAC7C,MAAM,uBAAuB,IAAA,yIAAY,EAAC,CAAC,IAAM,EAAE,oBAAoB;IAEvE,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa;YACjB,IAAI;gBACF,MAAM,eAAe,MAAM,IAAA,6IAAkB;gBAE7C,IAAI,cAAc;oBAChB,MAAM,OAAO,MAAM,IAAA,kIAAO;oBAC1B,QAAQ;gBACV,OAAO;oBACL;oBACA,wCAAwC;oBACxC,IAAI,eAAe,IAAI,CAAC,CAAC,IAAM,SAAS,UAAU,CAAC,KAAK;wBACtD,OAAO,IAAI,CAAC;oBACd;gBACF;YACF,EAAE,OAAO,KAAK;gBACZ;gBACA,IAAI,eAAe,IAAI,CAAC,CAAC,IAAM,SAAS,UAAU,CAAC,KAAK;oBACtD,OAAO,IAAI,CAAC;gBACd;YACF;QACF;QAEA;IACF,GAAG;QAAC;QAAU;QAAQ;QAAS;KAAqB;IAEpD,OAAO;AACT;uCAEe","debugId":null}}]
}