{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/components/TanStackProvider/TanStackProvider.tsx"],"sourcesContent":["// components/TanStackProvider/TanStackProvider.tsx\n\n\"use client\";\n\nimport { useState } from \"react\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst TanStackProvider = ({ children }: Props) => {\n  const [queryClient] = useState(() => new QueryClient());\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {children}\n    </QueryClientProvider>\n  );\n};\n\nexport default TanStackProvider;"],"names":[],"mappings":"AAAA,mDAAmD;;;;;;AAInD;AACA;AAAA;AAHA;;;;AASA,MAAM,mBAAmB,CAAC,EAAE,QAAQ,EAAS;IAC3C,MAAM,CAAC,YAAY,GAAG,IAAA,iNAAQ,EAAC,IAAM,IAAI,4LAAW;IAEpD,qBACE,8OAAC,6MAAmB;QAAC,QAAQ;kBAC1B;;;;;;AAGP;uCAEe","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/Header/Header.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"header\": \"Header-module__arFiJq__header\",\n  \"navigation\": \"Header-module__arFiJq__navigation\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/AuthNavigation/AuthNavigation.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"logoutButton\": \"AuthNavigation-module__DN8toa__logoutButton\",\n  \"navigationItem\": \"AuthNavigation-module__DN8toa__navigationItem\",\n  \"navigationLink\": \"AuthNavigation-module__DN8toa__navigationLink\",\n  \"userEmail\": \"AuthNavigation-module__DN8toa__userEmail\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/lib/store/authStore.ts"],"sourcesContent":["import { User } from \"@/types/user\";\nimport { persist } from \"zustand/middleware\";\nimport { create } from \"zustand/react\";\n\nexport type AuthStore = {\n  user: User | null;\n  isAuthenticated: boolean;\n  setUser: (user: User) => void;\n  clearIsAuthenticated: () => void;\n};\n\nexport const useAuthStore = create<AuthStore>()(\n  persist(\n    (set) => ({\n      user: null,\n      isAuthenticated: false,\n      setUser: (user: User) => {\n        set({ user, isAuthenticated: true });\n      },\n      clearIsAuthenticated: () => {\n        set({ user: null, isAuthenticated: false });\n      },\n    }),\n    {\n      name: \"auth-storage\", \n    }\n  )\n);\n"],"names":[],"mappings":";;;;AACA;AACA;;;AASO,MAAM,eAAe,IAAA,kJAAM,IAChC,IAAA,wJAAO,EACL,CAAC,MAAQ,CAAC;QACR,MAAM;QACN,iBAAiB;QACjB,SAAS,CAAC;YACR,IAAI;gBAAE;gBAAM,iBAAiB;YAAK;QACpC;QACA,sBAAsB;YACpB,IAAI;gBAAE,MAAM;gBAAM,iBAAiB;YAAM;QAC3C;IACF,CAAC,GACD;IACE,MAAM;AACR","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/components/AuthNavigation/AuthNavigation.tsx"],"sourcesContent":["\"use client\"\nimport Link from \"next/link\";\nimport css from \"./AuthNavigation.module.css\";\nimport { useAuthStore } from \"@/lib/store/authStore\";\nimport { useRouter } from \"next/navigation\";\n\n\nexport const AuthNavigation = () => {\n  const router = useRouter();\n  //   const { isAuthenticated, user, clearIsAuthenticated } = useAuthStore((state) => ({\n  //   isAuthenticated: state.isAuthenticated,\n  //   user: state.user,\n  //   clearIsAuthenticated: state.clearIsAuthenticated,\n  // }));\n  const isAuthenticated = useAuthStore(state => state.isAuthenticated);\n  const user = useAuthStore(state => state.user);\n  const clearIsAuthenticated = useAuthStore(state => state.clearIsAuthenticated);\n\n  const handleLogout = () => {\n    clearIsAuthenticated();\n    router.push(\"/sign-in\");  \n  }\n  return (\n    <>\n      {isAuthenticated ? (\n        <>\n          <li className={css.navigationItem}>\n            <Link\n              href=\"/profile\"\n              prefetch={false}\n              className={css.navigationLink}\n            >\n              Profile\n            </Link>\n          </li>\n\n          <li className={css.navigationItem}>\n            <p className={css.userEmail}>{user?.email}</p>\n            <button className={css.logoutButton} onClick={handleLogout}>Logout</button>\n          </li>\n        </>\n      ) : (\n        <>\n          <li className={css.navigationItem}>\n            <Link\n              href=\"/sign-in\"\n              prefetch={false}\n              className={css.navigationLink}\n            >\n              Login\n            </Link>\n          </li>\n\n          <li className={css.navigationItem}>\n            <Link\n              href=\"/sign-up\"\n              prefetch={false}\n              className={css.navigationLink}\n            >\n              Sign up\n            </Link>\n          </li>\n        </>\n      )}\n    </>\n  );\n};\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAOO,MAAM,iBAAiB;IAC5B,MAAM,SAAS,IAAA,+IAAS;IACxB,uFAAuF;IACvF,4CAA4C;IAC5C,sBAAsB;IACtB,sDAAsD;IACtD,OAAO;IACP,MAAM,kBAAkB,IAAA,yIAAY,EAAC,CAAA,QAAS,MAAM,eAAe;IACnE,MAAM,OAAO,IAAA,yIAAY,EAAC,CAAA,QAAS,MAAM,IAAI;IAC7C,MAAM,uBAAuB,IAAA,yIAAY,EAAC,CAAA,QAAS,MAAM,oBAAoB;IAE7E,MAAM,eAAe;QACnB;QACA,OAAO,IAAI,CAAC;IACd;IACA,qBACE;kBACG,gCACC;;8BACE,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;8BAC/B,cAAA,8OAAC,uKAAI;wBACH,MAAK;wBACL,UAAU;wBACV,WAAW,qKAAG,CAAC,cAAc;kCAC9B;;;;;;;;;;;8BAKH,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;;sCAC/B,8OAAC;4BAAE,WAAW,qKAAG,CAAC,SAAS;sCAAG,MAAM;;;;;;sCACpC,8OAAC;4BAAO,WAAW,qKAAG,CAAC,YAAY;4BAAE,SAAS;sCAAc;;;;;;;;;;;;;yCAIhE;;8BACE,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;8BAC/B,cAAA,8OAAC,uKAAI;wBACH,MAAK;wBACL,UAAU;wBACV,WAAW,qKAAG,CAAC,cAAc;kCAC9B;;;;;;;;;;;8BAKH,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;8BAC/B,cAAA,8OAAC,uKAAI;wBACH,MAAK;wBACL,UAAU;wBACV,WAAW,qKAAG,CAAC,cAAc;kCAC9B;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/components/Header/Header.tsx"],"sourcesContent":["\"use client\"\nimport Link from \"next/link\";\nimport css from \"./Header.module.css\";\nimport { AuthNavigation } from \"../AuthNavigation/AuthNavigation\";\n\nconst Header = () => {\n  return (\n    <header className={css.header}>\n      <Link href=\"/\" aria-label=\"Home\">\n        NoteHub\n      </Link>\n      <nav aria-label=\"Main Navigation\">\n        <ul className={css.navigation}>\n          <li>\n            <Link href=\"/\">Home</Link>\n          </li>\n          <li>\n            <Link href=\"/notes/filter/all\">Notes</Link>\n          </li>\n          <AuthNavigation/>\n        </ul>\n        \n      </nav>\n    </header>\n  );\n};\n\nexport default Header;"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKA,MAAM,SAAS;IACb,qBACE,8OAAC;QAAO,WAAW,qJAAG,CAAC,MAAM;;0BAC3B,8OAAC,uKAAI;gBAAC,MAAK;gBAAI,cAAW;0BAAO;;;;;;0BAGjC,8OAAC;gBAAI,cAAW;0BACd,cAAA,8OAAC;oBAAG,WAAW,qJAAG,CAAC,UAAU;;sCAC3B,8OAAC;sCACC,cAAA,8OAAC,uKAAI;gCAAC,MAAK;0CAAI;;;;;;;;;;;sCAEjB,8OAAC;sCACC,cAAA,8OAAC,uKAAI;gCAAC,MAAK;0CAAoB;;;;;;;;;;;sCAEjC,8OAAC,iKAAc;;;;;;;;;;;;;;;;;;;;;;AAMzB;uCAEe","debugId":null}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/lib/api/api.ts"],"sourcesContent":["\nimport axios from 'axios';\n\nconst baseURL = `${process.env.NEXT_PUBLIC_API_URL}/api`;\n\nexport const api = axios.create({\n  baseURL: baseURL,\n  withCredentials: true, \n}); "],"names":[],"mappings":";;;;AACA;;AAEA,MAAM,UAAU,6DAAmC,IAAI,CAAC;AAEjD,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IAC9B,SAAS;IACT,iBAAiB;AACnB","debugId":null}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/lib/api/clientApi.ts"],"sourcesContent":["import { NewNote, Note } from \"@/types/note\";\nimport { api } from \"./api\";\nimport { User } from \"@/types/user\";\nimport { AxiosError } from \"axios\";\n\n{\n  /*\nlogin\nlogout\ncheckSession\ngetMe\nupdateMe  \n    */\n}\nconst myKey = process.env.NEXT_PUBLIC_NOTEHUB_TOKEN;\ninterface NoteListData {\n  notes: Note[];\n  totalPages: number;\n}\nexport type RegisterRequest = {\n  email: string;\n  password: string;\n  userName?: string;\n};\nexport type LoginRequest = {\n  email: string;\n  password: string;\n};\nconst authHeaders = {\n  Authorization: `Bearer ${myKey}`,\n};\nexport const fetchNotes = async (\n  search: string,\n  page: number,\n  tag?: string\n): Promise<NoteListData> => {\n  try {\n    const res = await api.get<NoteListData>(\"/notes\", {\n      params: {\n        search,\n        page,\n        perPage: 12,\n        sortBy: \"created\",\n        tag,\n      },\n\n      headers: authHeaders,\n    });\n\n    const result = res.data;\n    console.log(result);\n    return result;\n  } catch (error) {\n    console.log(error);\n    return { notes: [], totalPages: 0 };\n  }\n};\n\nexport const fetchNoteById = async (id: string): Promise<Note | null> => {\n  try {\n    const res = await api.get<Note>(`/notes/${id}`, {\n      headers: authHeaders,\n    });\n    return res.data;\n  } catch (error) {\n    console.log(error);\n    return null;\n  }\n};\n\nexport const createNote = async (values: NewNote): Promise<Note | null> => {\n  try {\n    const res = await api.post<Note>(`/notes`, values, {\n      headers: authHeaders,\n    });\n    console.log(res.data);\n    return res.data;\n  } catch (error) {\n    console.log(error);\n    return null;\n  }\n};\n\nexport const deleteNote = async (noteId: string): Promise<Note | null> => {\n  try {\n    const res = await api.delete<Note>(`/notes/${noteId}`, {\n      headers: authHeaders,\n    });\n    return res.data;\n  } catch (error) {\n    console.log(error);\n    return null;\n  }\n};\n\nexport const register = async (data: RegisterRequest) => {\n  try {\n    const res = await api.post<User>(\"/auth/register\", data, {\n      headers: authHeaders,\n      withCredentials: true,\n    });\n    console.log(res.data)\n    return res.data;\n  } catch (error){\n    const err = error as AxiosError<{ error: string }>;\n\n    console.error(err);\n\n    throw new Error(err.response?.data?.error || \"Registration failed\");\n  }\n};\n\nexport const login = async (data: LoginRequest) => {\n  try {\n    const res = await api.post<User>(\"/auth/login\", data, {\n      headers: authHeaders,\n      withCredentials: true,\n    });\n    console.log(res.data)\n    return res.data;\n  } catch (error){\n    const err = error as AxiosError<{ error: string }>;\n\n    console.error(err);\n\n    throw new Error(err.response?.data?.error || \"Registration failed\");\n  }\n}\n\n\nexport const checkClientSession = async () => {\n  const res = await api.get(\"/auth/session\", { withCredentials: true });\n  return res.data; \n};"],"names":[],"mappings":";;;;;;;;;;;;;;;;AACA;;AAIA;AACE;;;;;;IAME,GACJ,CACA,MAAM;AAcN,MAAM,cAAc;IAClB,eAAe,CAAC,OAAO,EAAE,OAAO;AAClC;AACO,MAAM,aAAa,OACxB,QACA,MACA;IAEA,IAAI;QACF,MAAM,MAAM,MAAM,wHAAG,CAAC,GAAG,CAAe,UAAU;YAChD,QAAQ;gBACN;gBACA;gBACA,SAAS;gBACT,QAAQ;gBACR;YACF;YAEA,SAAS;QACX;QAEA,MAAM,SAAS,IAAI,IAAI;QACvB,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;QACZ,OAAO;YAAE,OAAO,EAAE;YAAE,YAAY;QAAE;IACpC;AACF;AAEO,MAAM,gBAAgB,OAAO;IAClC,IAAI;QACF,MAAM,MAAM,MAAM,wHAAG,CAAC,GAAG,CAAO,CAAC,OAAO,EAAE,IAAI,EAAE;YAC9C,SAAS;QACX;QACA,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAO,CAAC,MAAM,CAAC,EAAE,QAAQ;YACjD,SAAS;QACX;QACA,QAAQ,GAAG,CAAC,IAAI,IAAI;QACpB,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,MAAM,MAAM,wHAAG,CAAC,MAAM,CAAO,CAAC,OAAO,EAAE,QAAQ,EAAE;YACrD,SAAS;QACX;QACA,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT;AACF;AAEO,MAAM,WAAW,OAAO;IAC7B,IAAI;QACF,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAO,kBAAkB,MAAM;YACvD,SAAS;YACT,iBAAiB;QACnB;QACA,QAAQ,GAAG,CAAC,IAAI,IAAI;QACpB,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAM;QACb,MAAM,MAAM;QAEZ,QAAQ,KAAK,CAAC;QAEd,MAAM,IAAI,MAAM,IAAI,QAAQ,EAAE,MAAM,SAAS;IAC/C;AACF;AAEO,MAAM,QAAQ,OAAO;IAC1B,IAAI;QACF,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAO,eAAe,MAAM;YACpD,SAAS;YACT,iBAAiB;QACnB;QACA,QAAQ,GAAG,CAAC,IAAI,IAAI;QACpB,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAM;QACb,MAAM,MAAM;QAEZ,QAAQ,KAAK,CAAC;QAEd,MAAM,IAAI,MAAM,IAAI,QAAQ,EAAE,MAAM,SAAS;IAC/C;AACF;AAGO,MAAM,qBAAqB;IAChC,MAAM,MAAM,MAAM,wHAAG,CAAC,GAAG,CAAC,iBAAiB;QAAE,iBAAiB;IAAK;IACnE,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/GitHub/09-auth/components/AuthProvider/AuthProvider.tsx"],"sourcesContent":["\"use client\"\nimport { checkClientSession } from \"@/lib/api/clientApi\";\nimport { useAuthStore } from \"@/lib/store/authStore\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { ReactNode, useEffect, useState } from \"react\";\ninterface AuthProviderProps {\n  children: ReactNode;\n}\nconst PRIVATE_ROUTES = [\"/profile\"];\nconst AuthProvider = ({ children }: AuthProviderProps) => {\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const setUser = useAuthStore((s) => s.setUser);\n  const clearIsAuthenticated = useAuthStore((s) => s.clearIsAuthenticated);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const verify = async () => {\n      const isPrivate = PRIVATE_ROUTES.some((r) => pathname.startsWith(r));\n\n      if (!isPrivate) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        const user = await checkClientSession();\n        setUser(user); \n      } catch (e) {\n        clearIsAuthenticated();\n        router.push(\"/sign-in\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    verify();\n  }, [pathname]);\n\n  \n\n  return children;\n};\n\nexport default AuthProvider;\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAJA;;;;;AAQA,MAAM,iBAAiB;IAAC;CAAW;AACnC,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAqB;IACnD,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,UAAU,IAAA,yIAAY,EAAC,CAAC,IAAM,EAAE,OAAO;IAC7C,MAAM,uBAAuB,IAAA,yIAAY,EAAC,CAAC,IAAM,EAAE,oBAAoB;IACvE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,SAAS;YACb,MAAM,YAAY,eAAe,IAAI,CAAC,CAAC,IAAM,SAAS,UAAU,CAAC;YAEjE,IAAI,CAAC,WAAW;gBACd,WAAW;gBACX;YACF;YAEA,IAAI;gBACF,MAAM,OAAO,MAAM,IAAA,6IAAkB;gBACrC,QAAQ;YACV,EAAE,OAAO,GAAG;gBACV;gBACA,OAAO,IAAI,CAAC;YACd,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAS;IAIb,OAAO;AACT;uCAEe","debugId":null}}]
}