{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["// import { NextResponse } from \"next/server\";\n// import type { NextRequest } from \"next/server\";\n// import { checkServerSession } from \"./lib/api/serverApi\";\n\n// const privateRoutes = [\"/profile\", \"/notes\"];\n// const publicRoutes = [\"/sign-in\", \"/sign-up\"];\n\n// export async function middleware(req: NextRequest) {\n//   const { pathname } = req.nextUrl;\n\n//   const accessToken = req.cookies.get(\"accessToken\")?.value;\n//   const refreshToken = req.cookies.get(\"refreshToken\")?.value;\n\n//   const isPublicRoute = publicRoutes.some((route) => pathname.startsWith(route));\n//   const isPrivateRoute = privateRoutes.some((route) => pathname.startsWith(route));\n\n//   if (!accessToken) {\n//     if (refreshToken) {\n//       try {\n//         const response = await checkServerSession();\n//         const setCookie = response.headers[\"set-cookie\"];\n//         const res = NextResponse.next();\n\n//         setCookie?.forEach((cookieStr: string) => {\n//           const [nameValue] = cookieStr.split(\"; \");\n//           const [name, value] = nameValue.split(\"=\");\n//           res.cookies.set(name, value, { httpOnly: true, path: \"/\" });\n//         });\n\n//         if (isPublicRoute) return NextResponse.redirect(new URL(\"/\", req.url), res);\n//         if (isPrivateRoute) return res;\n//       } catch (err) {\n//         console.error(\"Failed to refresh session:\", err);\n//         if (isPrivateRoute) return NextResponse.redirect(new URL(\"/sign-in\", req.url));\n//         if (isPublicRoute) return NextResponse.next();\n//       }\n//     } else {\n//       if (isPrivateRoute) return NextResponse.redirect(new URL(\"/sign-in\", req.url));\n//       if (isPublicRoute) return NextResponse.next();\n//     }\n//   }\n\n//   if (accessToken) {\n//     if (isPublicRoute) return NextResponse.redirect(new URL(\"/\", req.url));\n//     if (isPrivateRoute) return NextResponse.next();\n//   }\n\n//   return NextResponse.next();\n// }\n// export const config = {\n//   matcher: [\n//     \"/profile/:path*\",  \n//     \"/notes/:path*\",\n//     \"/sign-in\",\n//     \"/sign-up\",\n//   ],\n// };"],"names":[],"mappings":"AAAA,8CAA8C;AAC9C,kDAAkD;AAClD,4DAA4D;AAE5D,gDAAgD;AAChD,iDAAiD;AAEjD,uDAAuD;AACvD,sCAAsC;AAEtC,+DAA+D;AAC/D,iEAAiE;AAEjE,oFAAoF;AACpF,sFAAsF;AAEtF,wBAAwB;AACxB,0BAA0B;AAC1B,cAAc;AACd,uDAAuD;AACvD,4DAA4D;AAC5D,2CAA2C;AAE3C,sDAAsD;AACtD,uDAAuD;AACvD,wDAAwD;AACxD,yEAAyE;AACzE,cAAc;AAEd,uFAAuF;AACvF,0CAA0C;AAC1C,wBAAwB;AACxB,4DAA4D;AAC5D,0FAA0F;AAC1F,yDAAyD;AACzD,UAAU;AACV,eAAe;AACf,wFAAwF;AACxF,uDAAuD;AACvD,QAAQ;AACR,MAAM;AAEN,uBAAuB;AACvB,8EAA8E;AAC9E,sDAAsD;AACtD,MAAM;AAEN,gCAAgC;AAChC,IAAI;AACJ,0BAA0B;AAC1B,eAAe;AACf,2BAA2B;AAC3B,uBAAuB;AACvB,kBAAkB;AAClB,kBAAkB;AAClB,OAAO;AACP,KAAK"}}]
}